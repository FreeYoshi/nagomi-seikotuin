<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>è¨­å®šãƒ†ã‚¹ãƒˆ - å’Œã¿æ•´éª¨é™¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .status-ok { color: #4caf50; }
        .status-error { color: #f44336; }
        .status-warning { color: #ff9800; }
        pre { background: #f5f5f5; padding: 20px; border-radius: 5px; }
        .config-item { 
            margin: 10px 0; 
            padding: 10px; 
            border: 1px solid #ddd; 
            border-radius: 5px; 
        }
    </style>
</head>
<body>
    <!-- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ -->
    <script src="config/env.js"></script>
    <script src="config/config.js"></script>

    <h1>ğŸ”§ ã‚·ã‚¹ãƒ†ãƒ è¨­å®šçŠ¶æ³ç¢ºèª</h1>
    <p>ã“ã®ãƒšãƒ¼ã‚¸ã§ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šçŠ¶æ³ã‚’ç¢ºèªã§ãã¾ã™ã€‚</p>

    <div id="results"></div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const results = document.getElementById('results');
            let html = '';

            try {
                // åŸºæœ¬è¨­å®šã®ç¢ºèª
                html += '<h2>ğŸ“‹ åŸºæœ¬è¨­å®š</h2>';
                html += `<div class="config-item">
                    <strong>ç’°å¢ƒ:</strong> <span class="${window.AppConfig.isDevelopment() ? 'status-warning' : 'status-ok'}">
                        ${window.AppConfig.isDevelopment() ? 'é–‹ç™ºç’°å¢ƒ' : 'æœ¬ç•ªç’°å¢ƒ'}
                    </span>
                </div>`;

                // ç’°å¢ƒå¤‰æ•°ã®ç¢ºèª
                html += '<h2>ğŸ”‘ ç’°å¢ƒå¤‰æ•°</h2>';
                const envVars = [
                    'SUPABASE_URL',
                    'SUPABASE_ANON_KEY', 
                    'EMAILJS_PUBLIC_KEY',
                    'EMAILJS_SERVICE_ID',
                    'EMAILJS_TEMPLATE_ID'
                ];

                envVars.forEach(key => {
                    const value = window[key];
                    const status = value ? 'status-ok' : 'status-error';
                    const displayValue = value ? value.substring(0, 20) + '...' : 'ãªã—';
                    
                    html += `<div class="config-item">
                        <strong>${key}:</strong> 
                        <span class="${status}">${displayValue}</span>
                    </div>`;
                });

                // Supabaseè¨­å®šã®ç¢ºèª
                html += '<h2>ğŸ—„ï¸ Supabaseè¨­å®š</h2>';
                try {
                    const supabaseConfig = window.AppConfig.getSupabaseConfig();
                    html += `<div class="config-item status-ok">
                        <strong>URL:</strong> ${supabaseConfig.url.substring(0, 30)}...<br>
                        <strong>Key:</strong> ${supabaseConfig.key.substring(0, 20)}...
                    </div>`;
                } catch (error) {
                    html += `<div class="config-item status-error">
                        <strong>ã‚¨ãƒ©ãƒ¼:</strong> ${error.message}
                    </div>`;
                }

                // EmailJSè¨­å®šã®ç¢ºèª
                html += '<h2>ğŸ“§ EmailJSè¨­å®š</h2>';
                try {
                    const emailConfig = window.AppConfig.getEmailJSConfig();
                    html += `<div class="config-item status-ok">
                        <strong>Public Key:</strong> ${emailConfig.publicKey}<br>
                        <strong>Service ID:</strong> ${emailConfig.serviceId}<br>
                        <strong>Template ID:</strong> ${emailConfig.templateId}
                    </div>`;
                } catch (error) {
                    html += `<div class="config-item status-error">
                        <strong>ã‚¨ãƒ©ãƒ¼:</strong> ${error.message}
                    </div>`;
                }

                // ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®šã®ç¢ºèª
                html += '<h2>ğŸ“Š ãƒ†ãƒ¼ãƒ–ãƒ«è¨­å®š</h2>';
                try {
                    const tables = window.AppConfig.tables;
                    Object.keys(tables).forEach(key => {
                        html += `<div class="config-item status-ok">
                            <strong>${key}:</strong> ${tables[key]}
                        </div>`;
                    });
                } catch (error) {
                    html += `<div class="config-item status-error">
                        <strong>ã‚¨ãƒ©ãƒ¼:</strong> ${error.message}
                    </div>`;
                }

                // å–¶æ¥­æ™‚é–“è¨­å®š
                html += '<h2>â° å–¶æ¥­æ™‚é–“è¨­å®š</h2>';
                const businessHours = window.AppConfig.businessHours;
                html += `<div class="config-item status-ok">
                    <strong>å¹³æ—¥:</strong> ${businessHours.weekdays.start}:00 - ${businessHours.weekdays.end}:00<br>
                    <strong>åœŸæ›œ:</strong> ${businessHours.saturday.start}:00 - ${businessHours.saturday.end}:00<br>
                    <strong>ä¼‘æ¥­æ—¥:</strong> ${businessHours.closedDays.join(', ')} (0=æ—¥æ›œ)
                </div>`;

                // é€£çµ¡å…ˆè¨­å®š
                html += '<h2>ğŸ“ é€£çµ¡å…ˆè¨­å®š</h2>';
                const contact = window.AppConfig.contact;
                html += `<div class="config-item status-ok">
                    <strong>é›»è©±:</strong> ${contact.phone}<br>
                    <strong>Instagram:</strong> ${contact.instagramHandle}<br>
                    <strong>LINE:</strong> ${contact.line ? 'è¨­å®šæ¸ˆã¿' : 'æœªè¨­å®š'}
                </div>`;

            } catch (error) {
                html += `<div class="config-item status-error">
                    <h2>âŒ è¨­å®šèª­ã¿è¾¼ã¿ã‚¨ãƒ©ãƒ¼</h2>
                    <pre>${error.message}\n${error.stack}</pre>
                </div>`;
            }

            // ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°ã®è¡¨ç¤º
            html += '<h2>ğŸ“ ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ­ã‚°</h2>';
            html += '<p>è©³ç´°ãªãƒ­ã‚°ã¯é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>';
            html += '<button onclick="window.open(\'/admin.html\', \'_blank\')">ç®¡ç†ç”»é¢ã‚’é–‹ã</button>';
            html += '<button onclick="window.open(\'/index.html\', \'_blank\')">ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‚’é–‹ã</button>';

            results.innerHTML = html;
        });
    </script>
</body>
</html>